<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SwiftUI Chapter 6: Layout and Stacks</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box}
  body{
    font-family:-apple-system, BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
    min-height:100vh;overflow-x:hidden
  }
  .container{max-width:1400px;margin:0 auto;padding:20px}
  .header{text-align:center;color:#fff;margin-bottom:30px;animation:slideDown .8s ease-out}
  .header h1{font-size:2.5em;font-weight:700;margin-bottom:10px}
  .header p{font-size:1.2em;opacity:.9}

  .lesson-container{background:#fff;border-radius:20px;box-shadow:0 20px 40px rgba(0,0,0,.1);overflow:hidden;margin-bottom:30px;animation:slideUp .8s ease-out .2s both}
  .lesson-header{background:linear-gradient(135deg,#4facfe 0%,#00f2fe 100%);color:#fff;padding:20px;text-align:center}
  .lesson-content{display:flex;min-height:600px}
  .code-panel{flex:1;background:#1e1e1e;color:#d4d4d4;font-family:Monaco,Menlo,monospace;font-size:14px;line-height:1.5;overflow:auto}
  .code-header{background:#2d2d30;padding:15px;border-bottom:1px solid #3e3e42;font-weight:600;color:#ccc;display:flex;justify-content:space-between;align-items:center}
  .code-content{padding:20px;white-space:pre-wrap;max-height:500px;overflow-y:auto}

  .simulator-panel{flex:1;background:#f8f9fa;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;padding:20px}
  .phone-frame{width:280px;height:560px;background:#000;border-radius:35px;padding:25px 15px;box-shadow:0 10px 30px rgba(0,0,0,.3);position:relative}
  .phone-frame::before{content:'';position:absolute;top:10px;left:50%;transform:translateX(-50%);width:60px;height:4px;background:#333;border-radius:2px}
  .screen{width:100%;height:100%;background:#fff;border-radius:25px;overflow:hidden;display:flex;flex-direction:column;position:relative}
  .status-bar{height:30px;background:rgba(0,0,0,.05);display:flex;justify-content:space-between;align-items:center;padding:0 15px;font-size:12px;color:#333}
  .app-content{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px;overflow-y:auto}

  .navigation-buttons{display:flex;justify-content:center;align-items:center;gap:15px;padding:20px;flex-wrap:wrap}
  .nav-btn{padding:12px 25px;border:none;border-radius:25px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;font-weight:600;cursor:pointer;transition:.3s;box-shadow:0 5px 15px rgba(0,0,0,.2)}
  .nav-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px rgba(0,0,0,.3)}
  .nav-btn:disabled{opacity:.5;cursor:not-allowed}

  .lesson-objectives{background:rgba(76,175,80,.1);border-left:4px solid #4caf50;padding:15px;margin:20px;border-radius:5px}
  .lesson-objectives h4{color:#2e7d32;margin-bottom:10px}
  .lesson-objectives ul{margin-left:20px;color:#333}
  .lesson-objectives li{margin:5px 0}

  .interactive-controls{background:rgba(255,255,255,.95);border-radius:15px;padding:15px;margin-top:20px;box-shadow:0 5px 15px rgba(0,0,0,.1)}
  .control-group{margin:10px 0}
  .control-label{font-size:12px;color:#666;margin-bottom:5px;display:block}
  .control-btn{padding:8px 15px;margin:5px;border:none;border-radius:20px;background:#007bff;color:#fff;font-size:12px;cursor:pointer;transition:.2s}
  .control-btn:hover{background:#0056b3;transform:scale(1.05)}
  .control-btn.active{background:#28a745}
  input[type="range"]{width:100%;margin:5px 0}

  .color-picker{display:flex;gap:10px;flex-wrap:wrap}
  .color-btn{width:30px;height:30px;border-radius:50%;border:2px solid #fff;box-shadow:0 2px 5px rgba(0,0,0,.2);cursor:pointer;transition:transform .2s}
  .color-btn:hover{transform:scale(1.2)}

  /* Pretty accents */
  .keyword{color:#ff79c6;font-weight:bold}.string{color:#f1fa8c}.comment{color:#6272a4;font-style:italic}
  .type{color:#8be9fd;font-weight:bold}.property{color:#bd93f9}.modifier{color:#8be9fd}.number{color:#ffb86c}
  .explanation{color:#f8f8f2;background:rgba(98,114,164,.3);padding:12px;border-radius:8px;margin:10px 0;border-left:4px solid #50fa7b}
  .explanation-title{color:#50fa7b;font-weight:bold;font-size:16px;margin-bottom:8px}
  .explanation-content{color:#f8f8f2;line-height:1.6;font-size:14px}
  .code-explanation{color:#f1fa8c;background:rgba(241,250,140,.15);padding:8px;border-radius:6px;margin:8px 0;border-left:3px solid #f1fa8c}

  .progress-bar{background:rgba(255,255,255,.2);height:4px;border-radius:2px;margin:0 20px;overflow:hidden}
  .progress-fill{background:#fff;height:100%;border-radius:2px;transition:width .3s ease}

  /* Demo blocks */
  .demo-item{padding:10px 14px;border-radius:10px;background:#e9ecef;font-size:12px;white-space:nowrap;box-shadow:inset 0 1px 0 rgba(255,255,255,.6)}
  .demo-area{width:100%;display:flex;align-items:center;justify-content:center}
  .stack-preview{border:1px dashed #ced4da;border-radius:12px;padding:10px;min-height:160px;width:220px;background:#fff}

  @keyframes slideDown{from{opacity:0;transform:translateY(-50px)}to{opacity:1;transform:translateY(0)}}
  @keyframes slideUp{from{opacity:0;transform:translateY(50px)}to{opacity:1;transform:translateY(0)}}

  @media (max-width:768px){.lesson-content{flex-direction:column}.phone-frame{width:250px;height:500px}}
</style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Chapter 6: Layout and Stacks</h1>
      <p>VStack ‚Ä¢ HStack ‚Ä¢ ZStack ‚Ä¢ Alignment ‚Ä¢ Spacing ‚Ä¢ Complex Layouts</p>
    </div>

    <div class="lesson-container">
      <div class="lesson-header">
        <h2 id="lessonTitle">6.1 VStack (Vertical Layouts)</h2>
        <div class="progress-bar"><div class="progress-fill" id="progressBar" style="width:20%"></div></div>
      </div>

      <div class="lesson-content">
        <!-- Code -->
        <div class="code-panel">
          <div class="code-header">
            <span id="codeFileName">VStackDemo.swift</span>
            <span id="codeType">Stack Layout</span>
          </div>
          <div class="code-content" id="codeContent">
<div class="explanation">
  <div class="explanation-title">üìê VSTACK</div>
  <div class="explanation-content">
    VStack arranges children vertically. Control spacing and alignment (leading, center, trailing).
  </div>
</div>

<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">VStackDemo</span>: <span class="type">View</span> {
  <span class="keyword">var</span> <span class="property">body</span>: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(<span class="property">alignment</span>: .<span class="property">center</span>, <span class="property">spacing</span>: <span class="number">12</span>) {
      <span class="type">Text</span>(<span class="string">"A"</span>)
      <span class="type">Text</span>(<span class="string">"B"</span>)
      <span class="type">Text</span>(<span class="string">"C"</span>)
    }
  }
}
          </div>
        </div>

        <!-- Simulator -->
        <div class="simulator-panel">
          <div class="phone-frame">
            <div class="screen">
              <div class="status-bar">
                <span>9:41</span><span>üì∂ üì∂ üîã</span>
              </div>
              <div class="app-content" id="simulator">
                <div class="demo-area">
                  <div class="stack-preview" id="stackHost"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Controls (initial for VStack) -->
          <div class="interactive-controls" id="controls">
            <div class="control-group">
              <label class="control-label">Alignment (VStack):</label>
              <button class="control-btn active" onclick="setAlignment('center', this)">Center</button>
              <button class="control-btn" onclick="setAlignment('leading', this)">Leading</button>
              <button class="control-btn" onclick="setAlignment('trailing', this)">Trailing</button>
            </div>
            <div class="control-group">
              <label class="control-label">Spacing:</label>
              <input type="range" min="0" max="30" step="2" value="12" oninput="setSpacing(this.value)" />
            </div>
            <div class="control-group">
              <label class="control-label">Items:</label>
              <button class="control-btn" onclick="addItem(this)">Add</button>
              <button class="control-btn" onclick="removeItem(this)">Remove</button>
              <button class="control-btn" onclick="shuffleItems(this)">Shuffle</button>
            </div>
          </div>

          <div class="lesson-objectives">
            <h4>Learning Objectives:</h4>
            <ul id="objectives">
              <li>Use VStack for vertical layouts</li>
              <li>Adjust alignment and spacing</li>
              <li>Dynamically add/remove children</li>
              <li>Preview how changes affect layout</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- NAV -->
    <div class="navigation-buttons">
      <button class="nav-btn" id="prevBtn" onclick="previousLesson()" disabled>‚Üê Previous</button>
      <span id="lessonCounter">1 / 5</span>
      <button class="nav-btn" id="nextBtn" onclick="nextLesson()">Next ‚Üí</button>
    </div>
  </div>

<script>
  let currentLesson = 0;
  const totalLessons = 5;

  // Shared demo state
  let axis = 'vertical';           // 'vertical' (VStack) or 'horizontal' (HStack)
  let alignment = 'center';        // center/leading/trailing for V/H stacks
  let spacing = 12;                // px
  let items = ['A','B','C'];       // demo items
  let layers = ['üîµ','üü¢','üü£'];   // for ZStack
  let zOrderTopIndex = 2;          // which layer sits on top

  const lessons = [
    {
      title: "6.1 VStack (Vertical Layouts)",
      fileName: "VStackDemo.swift",
      fileType: "Stack Layout",
      objectives: [
        "Use VStack for vertical layouts",
        "Adjust alignment and spacing",
        "Dynamically add/remove children",
        "Preview how changes affect layout"
      ]
    },
    {
      title: "6.2 HStack (Horizontal Layouts)",
      fileName: "HStackDemo.swift",
      fileType: "Stack Layout",
      objectives: [
        "Use HStack for horizontal layouts",
        "Align content on cross-axis",
        "Control spacing",
        "Build navigation bars/rows"
      ]
    },
    {
      title: "6.3 ZStack (Overlapping Layouts)",
      fileName: "ZStackDemo.swift",
      fileType: "Stack Layout",
      objectives: [
        "Layer views with ZStack",
        "Reorder layers (front/back)",
        "Position elements with offsets",
        "Create badges/overlays"
      ]
    },
    {
      title: "6.4 Alignment and Spacing",
      fileName: "AlignmentSpacing.swift",
      fileType: "Layout Controls",
      objectives: [
        "Master alignment options",
        "Use custom spacing values",
        "Mix stacks with nested layouts",
        "Understand cross-axis behavior"
      ]
    },
    {
      title: "6.5 Building Complex Layouts",
      fileName: "ComplexLayouts.swift",
      fileType: "Composition",
      objectives: [
        "Combine VStack/HStack/ZStack",
        "Create card-style UIs",
        "Balance whitespace and density",
        "Design flexible, readable screens"
      ]
    }
  ];

  // ---------- UTIL ----------
  function updateActiveButton(btn){
    if(!btn) return;
    const group = btn.closest('.control-group');
    if(!group) return;
    group.querySelectorAll('.control-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  }

  // Basic helpers
  function addItem(btn){
    const nextChar = String.fromCharCode(65 + items.length); // A, B, C...
    items.push(nextChar);
    renderStack();
    updateActiveButton(btn);
  }
  function removeItem(btn){
    if(items.length>0) items.pop();
    renderStack();
    updateActiveButton(btn);
  }
  function shuffleItems(btn){
    for(let i=items.length-1;i>0;i--){
      const j = Math.floor(Math.random()*(i+1));
      [items[i],items[j]] = [items[j],items[i]];
    }
    renderStack();
    updateActiveButton(btn);
  }

  // Alignment/Spacing controls
  function setAlignment(a, btn){
    alignment = a;
    renderStack();
    updateActiveButton(btn);
  }
  function setSpacing(val){
    spacing = Number(val);
    renderStack();
  }

  // Axis switcher
  function setAxis(ax, btn){
    axis = ax;
    renderStack();
    updateActiveButton(btn);
  }

  // ZStack layer controls
  function bringLayerToFront(index, btn){
    zOrderTopIndex = index;
    renderZStack();
    updateActiveButton(btn);
  }

  function nudgeLayer(index, dx, dy){
    // store offsets on dataset
    const el = document.getElementById('zlayer-'+index);
    if(!el) return;
    const x = Number(el.dataset.x || 0) + dx;
    const y = Number(el.dataset.y || 0) + dy;
    el.dataset.x = x;
    el.dataset.y = y;
    el.style.transform = `translate(${x}px, ${y}px)`;
  }

  // ---------- RENDERERS ----------
  function renderStack(){
    const host = document.getElementById('stackHost');
    if(!host) return;
    host.innerHTML = ''; // clear

    // container to simulate VStack/HStack
    const cont = document.createElement('div');
    cont.style.display = 'flex';
    cont.style.flexDirection = axis === 'vertical' ? 'column' : 'row';
    cont.style.alignItems = (()=>{
      if(alignment === 'leading')  return axis==='vertical' ? 'flex-start' : 'flex-start';
      if(alignment === 'trailing') return axis==='vertical' ? 'flex-end'   : 'flex-end';
      return 'center';
    })();
    cont.style.justifyContent = 'center';
    cont.style.gap = spacing + 'px';
    cont.style.width = '100%';
    cont.style.minHeight = '160px';

    items.forEach(label=>{
      const item = document.createElement('div');
      item.className = 'demo-item';
      item.textContent = label;
      cont.appendChild(item);
    });

    host.appendChild(cont);
  }

  function renderZStack(){
    const host = document.getElementById('stackHost');
    if(!host) return;
    host.innerHTML = '';

    const z = document.createElement('div');
    z.style.position = 'relative';
    z.style.width = '200px';
    z.style.height = '160px';
    z.style.margin = '0 auto';
    z.style.border = '1px dashed #ced4da';
    z.style.borderRadius = '12px';
    z.style.background = '#fff';

    // base positions
    const base = [
      {left: 20, top: 20},
      {left: 60, top: 60},
      {left: 100, top: 30}
    ];

    layers.forEach((emoji, i)=>{
      const layer = document.createElement('div');
      layer.id = 'zlayer-'+i;
      layer.className = 'demo-item';
      layer.textContent = emoji;
      layer.style.position = 'absolute';
      layer.style.left = base[i].left + 'px';
      layer.style.top  = base[i].top  + 'px';
      layer.style.borderRadius = '999px';
      layer.style.padding = '10px 12px';
      layer.style.userSelect = 'none';
      // stacking
      layer.style.zIndex = (i === zOrderTopIndex) ? 3 : (i===((zOrderTopIndex+1)%3) ? 2 : 1);
      // preserved manual nudges
      const x = Number(layer.dataset?.x || 0);
      const y = Number(layer.dataset?.y || 0);
      layer.dataset.x = x; layer.dataset.y = y;
      layer.style.transform = `translate(${x}px, ${y}px)`;

      z.appendChild(layer);
    });

    host.appendChild(z);
  }

  // ---------- LESSON CONTENT SWAPPER ----------
  function updateLesson(){
    const lesson = lessons[currentLesson];
    document.getElementById('lessonTitle').textContent = lesson.title;
    document.getElementById('codeFileName').textContent = lesson.fileName;
    document.getElementById('codeType').textContent = lesson.fileType;

    document.getElementById('lessonCounter').textContent = (currentLesson+1) + ' / ' + totalLessons;
    const progressPercent = ((currentLesson+1)/totalLessons) * 100;
    document.getElementById('progressBar').style.width = progressPercent + '%';

    document.getElementById('prevBtn').disabled = currentLesson===0;
    document.getElementById('nextBtn').disabled = currentLesson===totalLessons-1;

    // Objectives
    const objectivesList = document.getElementById('objectives');
    objectivesList.innerHTML = '';
    lesson.objectives.forEach(o=>{
      const li = document.createElement('li');
      li.textContent = o;
      objectivesList.appendChild(li);
    });

    updateLessonContent();
  }

  function updateLessonContent(){
    const code = document.getElementById('codeContent');
    const controls = document.getElementById('controls');
    const host = document.getElementById('stackHost');

    // reset defaults per lesson
    items = ['A','B','C'];
    spacing = 12;
    alignment = 'center';
    axis = 'vertical';
    zOrderTopIndex = 2;

    if(currentLesson === 0){
      // VStack
      code.innerHTML = `<div class="explanation">
  <div class="explanation-title">üìê VSTACK</div>
  <div class="explanation-content">VStack arranges children vertically. Control spacing and alignment (leading, center, trailing).</div>
</div>

<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">VStackDemo</span>: <span class="type">View</span> {
  <span class="keyword">var</span> <span class="property">body</span>: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(<span class="property">alignment</span>: .<span class="property">center</span>, <span class="property">spacing</span>: <span class="number">12</span>) {
      <span class="type">Text</span>(<span class="string">"A"</span>)
      <span class="type">Text</span>(<span class="string">"B"</span>)
      <span class="type">Text</span>(<span class="string">"C"</span>)
    }
  }
}`;

      controls.innerHTML = `
        <div class="control-group">
          <label class="control-label">Alignment (VStack):</label>
          <button class="control-btn active" onclick="setAlignment('center', this)">Center</button>
          <button class="control-btn" onclick="setAlignment('leading', this)">Leading</button>
          <button class="control-btn" onclick="setAlignment('trailing', this)">Trailing</button>
        </div>
        <div class="control-group">
          <label class="control-label">Spacing:</label>
          <input type="range" min="0" max="30" step="2" value="12" oninput="setSpacing(this.value)" />
        </div>
        <div class="control-group">
          <label class="control-label">Items:</label>
          <button class="control-btn" onclick="addItem(this)">Add</button>
          <button class="control-btn" onclick="removeItem(this)">Remove</button>
          <button class="control-btn" onclick="shuffleItems(this)">Shuffle</button>
        </div>`;

      host.parentElement.style.justifyContent = 'center';
      renderStack();
    }
    else if(currentLesson === 1){
      // HStack
      code.innerHTML = `<div class="explanation">
  <div class="explanation-title">üìè HSTACK</div>
  <div class="explanation-content">HStack arranges children horizontally. Alignment controls the vertical alignment of items.</div>
</div>

<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">HStackDemo</span>: <span class="type">View</span> {
  <span class="keyword">var</span> <span class="property">body</span>: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">HStack</span>(<span class="property">alignment</span>: .<span class="property">center</span>, <span class="property">spacing</span>: <span class="number">12</span>) {
      <span class="type">Text</span>(<span class="string">"Left"</span>)
      <span class="type">Text</span>(<span class="string">"Middle"</span>)
      <span class="type">Text</span>(<span class="string">"Right"</span>)
    }
  }
}`;

      controls.innerHTML = `
        <div class="control-group">
          <label class="control-label">Alignment (HStack):</label>
          <button class="control-btn active" onclick="setAlignment('center', this)">Center (vertical)</button>
          <button class="control-btn" onclick="setAlignment('leading', this)">Top</button>
          <button class="control-btn" onclick="setAlignment('trailing', this)">Bottom</button>
        </div>
        <div class="control-group">
          <label class="control-label">Spacing:</label>
          <input type="range" min="0" max="30" step="2" value="12" oninput="setSpacing(this.value)" />
        </div>
        <div class="control-group">
          <label class="control-label">Items:</label>
          <button class="control-btn" onclick="setAxis('horizontal', this)">HStack Mode</button>
          <button class="control-btn" onclick="addItem(this)">Add</button>
          <button class="control-btn" onclick="removeItem(this)">Remove</button>
          <button class="control-btn" onclick="shuffleItems(this)">Shuffle</button>
        </div>`;

      axis = 'horizontal';
      // remap alignment semantics for horizontal axis (top/center/bottom)
      renderStack();
    }
    else if(currentLesson === 2){
      // ZStack
      code.innerHTML = `<div class="explanation">
  <div class="explanation-title">üßÖ ZSTACK</div>
  <div class="explanation-content">ZStack layers views on the Z axis (front-to-back). Great for overlays, badges, and floating buttons.</div>
</div>

<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">ZStackDemo</span>: <span class="type">View</span> {
  <span class="keyword">var</span> <span class="property">body</span>: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">ZStack</span> {
      <span class="type">Circle</span>().<span class="modifier">fill</span>(.<span class="property">blue</span>).<span class="modifier">frame</span>(<span class="property">width</span>: <span class="number">80</span>, <span class="property">height</span>: <span class="number">80</span>)
      <span class="type">Circle</span>().<span class="modifier">fill</span>(.<span class="property">green</span>).<span class="modifier">offset</span>(<span class="property">x</span>: <span class="number">20</span>, <span class="property">y</span>: <span class="number">20</span>)
      <span class="type">Text</span>(<span class="string">"Top"</span>)
    }
  }
}`;

      controls.innerHTML = `
        <div class="control-group">
          <label class="control-label">Layer Order:</label>
          <button class="control-btn" onclick="bringLayerToFront(0, this)">üîµ Front</button>
          <button class="control-btn" onclick="bringLayerToFront(1, this)">üü¢ Front</button>
          <button class="control-btn active" onclick="bringLayerToFront(2, this)">üü£ Front</button>
        </div>
        <div class="control-group">
          <label class="control-label">Nudge Top Layer:</label>
          <button class="control-btn" onclick="nudgeLayer(zOrderTopIndex, -6, 0)">‚Üê</button>
          <button class="control-btn" onclick="nudgeLayer(zOrderTopIndex, 6, 0)">‚Üí</button>
          <button class="control-btn" onclick="nudgeLayer(zOrderTopIndex, 0, -6)">‚Üë</button>
          <button class="control-btn" onclick="nudgeLayer(zOrderTopIndex, 0, 6)">‚Üì</button>
        </div>`;

      renderZStack();
    }
    else if(currentLesson === 3){
      // Alignment & Spacing (mixed)
      code.innerHTML = `<div class="explanation">
  <div class="explanation-title">üéØ ALIGNMENT & SPACING</div>
  <div class="explanation-content">Alignment affects cross-axis positioning. Spacing sets the gap between siblings.</div>
</div>

<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">AlignmentSpacing</span>: <span class="type">View</span> {
  <span class="keyword">var</span> <span class="property">body</span>: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(<span class="property">alignment</span>: .<span class="property">leading</span>, <span class="property">spacing</span>: <span class="number">4</span>) {
      <span class="type">Text</span>(<span class="string">"Title"</span>).<span class="modifier">font</span>(.<span class="property">headline</span>)
      <span class="type">HStack</span>(<span class="property">spacing</span>: <span class="number">16</span>) {
        <span class="type">Text</span>(<span class="string">"Label"</span>)
        <span class="type">Text</span>(<span class="string">"Value"</span>)
      }
    }
  }
}`;

      controls.innerHTML = `
        <div class="control-group">
          <label class="control-label">Axis:</label>
          <button class="control-btn active" onclick="setAxis('vertical', this)">VStack</button>
          <button class="control-btn" onclick="setAxis('horizontal', this)">HStack</button>
        </div>
        <div class="control-group">
          <label class="control-label">Alignment:</label>
          <button class="control-btn active" onclick="setAlignment('center', this)">Center</button>
          <button class="control-btn" onclick="setAlignment('leading', this)">Leading/Top</button>
          <button class="control-btn" onclick="setAlignment('trailing', this)">Trailing/Bottom</button>
        </div>
        <div class="control-group">
          <label class="control-label">Spacing:</label>
          <input type="range" min="0" max="40" step="2" value="12" oninput="setSpacing(this.value)" />
        </div>
        <div class="control-group">
          <label class="control-label">Items:</label>
          <button class="control-btn" onclick="addItem(this)">Add</button>
          <button class="control-btn" onclick="removeItem(this)">Remove</button>
        </div>`;

      renderStack();
    }
    else if(currentLesson === 4){
      // Complex Layouts
      code.innerHTML = `<div class="explanation">
  <div class="explanation-title">üß© COMPLEX LAYOUTS</div>
  <div class="explanation-content">Compose VStack, HStack, and ZStack to build real UI sections like cards and headers.</div>
</div>

<span class="keyword">import</span> <span class="type">SwiftUI</span>

<span class="keyword">struct</span> <span class="type">ComplexLayout</span>: <span class="type">View</span> {
  <span class="keyword">var</span> <span class="property">body</span>: <span class="keyword">some</span> <span class="type">View</span> {
    <span class="type">VStack</span>(<span class="property">spacing</span>: <span class="number">12</span>) {
      <span class="type">HStack</span> {
        <span class="type">Text</span>(<span class="string">"Title"</span>).<span class="modifier">font</span>(.<span class="property">headline</span>)
        <span class="type">Spacer</span>()
        <span class="type">Text</span>(<span class="string">"Action"</span>).<span class="modifier">foregroundColor</span>(.<span class="property">blue</span>)
      }
      <span class="type">ZStack</span> {
        <span class="type">RoundedRectangle</span>(<span class="property">cornerRadius</span>: <span class="number">12</span>).<span class="modifier">fill</span>(.<span class="property">gray</span>.<span class="property">opacity</span>(<span class="number">0.1</span>))
        <span class="type">HStack</span>(<span class="property">spacing</span>: <span class="number">8</span>) {
          <span class="type">Text</span>(<span class="string">"Left"</span>)
          <span class="type">Spacer</span>()
          <span class="type">Text</span>(<span class="string">"Right"</span>)
        }.<span class="modifier">padding</span>()
      }.<span class="modifier">frame</span>(<span class="property">height</span>: <span class="number">100</span>)
    }.<span class="modifier">padding</span>()
  }
}`;

      controls.innerHTML = `
        <div class="control-group">
          <label class="control-label">Preset Cards:</label>
          <button class="control-btn active" onclick="renderCard(1, this)">Header + Card</button>
          <button class="control-btn" onclick="renderCard(2, this)">Image Left + Text</button>
          <button class="control-btn" onclick="renderCard(3, this)">Stats Grid</button>
        </div>`;

      renderCard(1);
    }
  }

  // Complex presets
  function renderCard(n, btn){
    if(btn) updateActiveButton(btn);
    const host = document.getElementById('stackHost');
    if(!host) return;
    host.innerHTML = '';

    if(n===1){
      host.innerHTML = `
        <div style="display:flex;flex-direction:column;gap:12px;width:220px">
          <div style="display:flex;align-items:center;gap:8px">
            <div class="demo-item">üè∑Ô∏è Title</div>
            <div style="flex:1"></div>
            <div class="demo-item">Action</div>
          </div>
          <div style="position:relative;border-radius:12px;background:#f1f3f5;height:120px;display:flex;align-items:center;justify-content:center">
            <div class="demo-item">Content</div>
          </div>
        </div>`;
    } else if(n===2){
      host.innerHTML = `
        <div style="display:flex;flex-direction:row;gap:10px;width:220px;align-items:center">
          <div class="demo-item" style="width:64px;height:64px;display:flex;align-items:center;justify-content:center">üñºÔ∏è</div>
          <div style="display:flex;flex-direction:column;gap:6px;flex:1">
            <div class="demo-item">Title</div>
            <div class="demo-item">Subtitle</div>
          </div>
        </div>`;
    } else {
      host.innerHTML = `
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;width:220px">
          <div class="demo-item">üìä 12</div>
          <div class="demo-item">‚≠ê 4.5</div>
          <div class="demo-item">üë§ 23</div>
          <div class="demo-item">‚è±Ô∏è 3m</div>
        </div>`;
    }
  }

  // ---------- NAV ----------
  function nextLesson(){
    if(currentLesson < totalLessons-1){
      currentLesson++;
      updateLesson();
    }
  }
  function previousLesson(){
    if(currentLesson > 0){
      currentLesson--;
      updateLesson();
    }
  }

  // Init
  document.addEventListener('DOMContentLoaded', updateLesson);
</script>
</body>
</html>
